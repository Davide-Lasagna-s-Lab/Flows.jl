<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Monitors · Flows.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Flows.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><a class="toctext" href="../quickstart/">Quick Start</a></li><li class="current"><a class="toctext" href>Monitors</a><ul class="internal"><li><a class="toctext" href="#Basic-usage-1">Basic usage</a></li><li><a class="toctext" href="#Advanced-usage-1">Advanced usage</a></li></ul></li><li><a class="toctext" href="../coupled/">Coupled systems</a></li><li><a class="toctext" href="../quadrature/">Quadrature equations</a></li><li><a class="toctext" href="../storage/">Solution storages</a></li><li><a class="toctext" href="../advanced/">Advanced features</a></li><li><a class="toctext" href="../examples/">Examples</a></li><li><a class="toctext" href="../available-methods/">Available methods</a></li><li><a class="toctext" href="../api/">Full API</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Monitors</a></li></ul><a class="edit-page" href="https://github.com/gasagna/Flows.jl/blob/master/docs/src/monitors.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Monitors</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Monitor-objects-1" href="#Monitor-objects-1">Monitor objects</a></h1><p>A <code>Flow</code> operator simply maps a state vector forward in time by some specified amount. It operates in place, and does not store or record anything during the trajectory. However, it is sometimes useful to record some quantity, for instance one of the degrees of freedom, or maybe some integral quantity along a trajectory. This can be achieved by using a <code>Monitor</code> object.</p><h2><a class="nav-anchor" id="Basic-usage-1" href="#Basic-usage-1">Basic usage</a></h2><p>The constructor of the <code>Monitor</code> type has the signature</p><pre><code class="language-julia">Monitor(x::X, g::Union{Callable, Function})</code></pre><p>The first argument is an object of some user defined type, say <code>X</code>, the same type used to represent the system&#39;s state. The second argument is a function or callable object that we use to &#39;observe&#39; the state along the simulation. It must accept a single argument of type <code>X</code>, must have the signature</p><pre><code class="language-julia">g(::X)</code></pre><p>and can return anything. </p><div class="admonition example"><div class="admonition-title">Example</div><div class="admonition-text"><p>This example demonstrates how to define an object to monitor the first state of a dynamical system with three degrees of freedom.</p><pre><code class="language-julia">mon = Monitor(zeros(3), x-&gt;x[1])</code></pre><p>Note how the second argument is simply an anonymous function that extracts the first element. A more elegant approach is also</p><pre><code class="language-julia">mon = Monitor(zeros(3), first)</code></pre></div></div><p>In practice, in the constructor, the function is called on the first argument, the type of the output is analysed and storage to hold more elements of the same type is allocated.</p><p>To monitor an observable during a trajectory, the monitor object can be passed as a third argument to a <code>Flow</code> object. During the integration, a sample of the observable is taken t the end of every time step, including one sample at the beginning of the trajectory.</p><div class="admonition example"><div class="admonition-title">Example</div><div class="admonition-text"><p>For instance, assume <code>F</code> is a <code>Flow</code> object for the Lorenz equations and we want to monitor the norm of the state vector over a short trajectory from <span>$t=0$</span> to <span>$t=1$</span>. This can be achieved by</p><pre><code class="language-julia">mon = Monitor(zeros(3), norm)
F(x, (0, 1), mon)</code></pre></div></div><p>At the end of the integration, the content of the <code>Monitor</code> object <code>mon</code> can be accessed by two helper functions. The first</p><pre><code class="language-julia">samples(mon)</code></pre><p>returns a Julia <code>Vector</code> with samples of the observed function, while </p><pre><code class="language-julia">times(mon)</code></pre><p>returns a <code>Vector</code> containing the times whan the samples are taken. This is quite useful for plotting the some observable of system as a function of time.</p><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>The observable function can really return anything. For instance, if we want to observe the state, we can define a monitor with the <code>copy</code> function.</p><pre><code class="language-julia">mon = Monitor(zeros(3), copy)
F(x, (0, 1), mon)
# samples(mon) now contains the state at the end of every time step</code></pre><p>If we want to monitor more quantities, we can pass a function that returns a <code>Tuple</code>, like so</p><pre><code class="language-julia">mon = Monitor(zeros(3), x-&gt;(x[1], x[2]^2))
F(x, (0, 1), mon)</code></pre><p>so that <code>samples(mon)</code> returns a vector of <code>Tuple</code>s.</p></div></div><h2><a class="nav-anchor" id="Advanced-usage-1" href="#Advanced-usage-1">Advanced usage</a></h2><p>The behaviour of <code>Monitor</code> object can be customised more finely. Consult the API page for more details.</p><footer><hr/><a class="previous" href="../quickstart/"><span class="direction">Previous</span><span class="title">Quick Start</span></a><a class="next" href="../coupled/"><span class="direction">Next</span><span class="title">Coupled systems</span></a></footer></article></body></html>
